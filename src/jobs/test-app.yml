description: |
  This job will automate running a set of backend/frontend tests.

parameters:
  # Not Required Parameters
  resource-class:
    type: string
    default: "medium"
    description: |
      The resource class that should be used to run tests. Defaults
      to medium 2 vCPU's and 4GB of RAM.
  docker-image:
    type: string
    default: "cimg/base:stable"
    description: |
      The docker image that will be used as an executor
      if isNode is true, node/default is recommended
  node-test:
    type: string
    default: test
    description: |
      The pacakge.json script to run the tests of the application.
      (defaults to test)
  isNode:
    type: boolean
    default: false
    description: |
      Set `true` if wanting to lint a node.js application
      Will use the script `npm run test` with all the test suites.

docker:
  - image: <<parameters.docker-image>>
resource_class: <<parameters.resource-class>>

steps:
  - checkout
  - run:
      name: "Job Overview"
      command: >
        echo "
         Testing Job Overview
        ----------------------
        Node: <<parameters.isNode>>"
  - when:
      condition: <<parameters.isNode>>
      steps:
        - node/install
        - node/install-packages
        - run:
            name: Run Tests
            command: >
              npm run <<parameters.node-test>>
