description: |
  This Job checks in the semantic version for a repository has been published already in docker.
  This Job is used a validation step prior to publishing the new docker image version.

parameters:
  # Required Parameters
  tag:
    type: string
    description: |
      The semantic version of the project trying to be deployed
      https://semver.org/spec/v2.0.0.html
  image:
    type: string
    description: |
      The name of the repository on dockerhub
  # Not Required Parameters
  organization:
    type: string
    default: "cyber4all"
    description: |
      The name of the docker organization
  docker-image:
    type: string
    default: "cimg/go:1.18"
    description: |
      The docker image that will be used as an executor

docker:
  - image: <<parameters.docker-image>>

steps:
  - checkout
  - check-docker-semver:
      tag: <<parameters.tag>>
      image: <<parameters.image>>
      organization: <<parameters.organization>>
