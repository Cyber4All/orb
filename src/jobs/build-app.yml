description: >
  This job will build an app

executor: node/default

parameters:
  # Required Parameters
  current-directory:
    type: string
    description: |
      The current working directory

steps:
  - checkout
  - node/install
  - attach_workspace:
      at: ~/<<parameters.current-directory>>
  - run:
      name: Install dependencies
      command: npm install
  - run:
      name: Build the app
      command: npm run build
  - persist_to_workspace:
      root: ./
      paths:
          - ./build
          - ./package.json
          - ./.elasticbeanstalk
          - ./.git
