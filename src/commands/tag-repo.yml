description: |
  This command will tag the github repository with the semantic version of the project.
  This command should be used prior to deploying the project.

parameters:
  # Required Parameters
  tag:
    type: string
    description: |
      The semantic version of the project trying to be deployed
      https://semver.org/spec/v2.0.0.html

steps:
  - run:
      name: Validate params
      command: >
        if [ -z "<<parameters.tag>>"]; then
          echo "tag parameter must be defined"
          exit 1
        fi
  - run:
      name: "Tag $CIRCLE_PROJECT_REPONAME Repository"
      command: |
        git tag "<<parameters.tag>>"
        git push origin releases --follow-tags
